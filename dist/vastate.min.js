(()=>{"use strict";class t{constructor(t,e){this.placeholder="{#VALUE#}",this.previousValue=this.placeholder,this.isLoading=!1,this.value=e,this.name=t,this.reloadDom()}setLoading(t){return this.isLoading=t,this.reloadDom(),this}static setLoadingTemplate(t){this.loadingTemplate=t}get(){return this.value}set(t){return this.value!=this.previousValue&&(this.previousValue=this.value),this.value=t,this.reloadDom(),console.log(this.value,this.previousValue),this}reloadDom(){this.reloadVastatePrints(),this.reloadVastateGroups(),this.reloadVastateEachs()}reloadVastatePrints(e=document.body){e.querySelectorAll(e.hasAttribute("vastate-print-group")||"vastate-print-group"==e.tagName.toLowerCase()?"vastate-print:not(vastate-print[state]), [vastate-print]:not([vastate-print][state])":`vastate-print[state="${this.name}"], [vastate-print][state="${this.name}"]:not([vastate-group])`).forEach((e=>{this.isLoading?e.innerHTML+=t.loadingTemplate:(e.innerHTML=e.innerHTML.split(t.loadingTemplate).join(""),e.hasAttribute("html")?e.innerHTML=e.innerHTML.split(this.previousValue.toString()).join(this.getVastatePrintValue(e)):e.textContent=e.textContent.split(this.previousValue.toString()).join(this.getVastatePrintValue(e)))}))}reloadVastateEachs(e=document.body){e.querySelectorAll(`vastate-each[state="${this.name}"], [vastate-each][state="${this.name}"]`).forEach((e=>{for(;e.children.length>1;)e.removeChild(e.lastElementChild);const a=Array.isArray(this.get())?this.get():[];if(a.length<1){if(!this.isLoading)return;e.innerHTML+=t.loadingTemplate}else null==a||a.forEach((t=>{var a;const r=document.querySelector(`vastate-each[state="${this.name}"] > *, [vastate-each][state="${this.name}"] > *`),i=null==r?void 0:r.cloneNode(!0);null==r||r.setAttribute("hidden","true"),i.removeAttribute("hidden"),"vastate-print"==i.tagName.toLocaleLowerCase()||i.hasAttribute("vastate-print")?i.innerHTML=null===(a=i.innerHTML)||void 0===a?void 0:a.split(this.placeholder).join(this.getVastatePrintValue(i,t)):null==i||i.querySelectorAll("vastate-print, [vastate-print]").forEach((e=>{var a;e.removeAttribute("hidden"),e.innerHTML=null===(a=e.innerHTML)||void 0===a?void 0:a.split(this.placeholder).join(this.getVastatePrintValue(e,t))})),e.appendChild(i)}))}))}reloadVastateGroups(){document.querySelectorAll(`vastate-print-group[state="${this.name}"], [vastate-print-group][state="${this.name}"]`).forEach((t=>this.reloadVastatePrints(t)))}getVastatePrintValue(e,a=this.get()){var r;return"object"!=typeof a||e.hasAttribute("obj")||t.throwError("You are trying to print an object without passing obj attribute in vastate print",e),"object"==typeof a&&Object.keys(a).length>0?a[null!==(r=e.getAttribute("obj").toString())&&void 0!==r?r:Object.keys(this.get())[0]]:a}static throwError(t,e){throw document.body.style.background="hsla(0,0%,90%,1)",document.body.style.color="hsla(0,0%,10%,.9)",document.body.style.fontFamily="arial",document.body.innerHTML=`\n                <h1>Vastate JS Error</h1>\n                <strong>${t}</strong>\n                <br>\n                <strong>Helpful Info:</strong>\n                <br>\n                <br>\n                <pre  style="  background: #262626; color:white;\n  font-weight: bold;\n  padding: 1rem;\n  border-radius: 6px;">\n                <code>${e.outerHTML.split("<").join("&lt;").split(">").join("&gt;")}</code>\n                </pre>            \n`,new TypeError(`Vastate JS Error: ${t}`)}resetVastateEach(e){e.innerHTML=e.innerHTML.split(t.loadingTemplate).join(""),e.querySelectorAll("* + *").forEach((t=>t.remove()))}}window.Vastate=t})();