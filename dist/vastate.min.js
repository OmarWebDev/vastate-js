(()=>{"use strict";class t{constructor(t,e){this.placeholder="{#VALUE#}",this.previousValue=this.placeholder,this.isLoading=!1,this.value=e,this.name=t,this.reloadDom()}setLoading(t){return this.isLoading=t,this.reloadDom(),this}static setLoadingTemplate(t){this.loadingTemplate=t}get(){return this.value}set(t){return this.value!=this.previousValue&&(this.previousValue=this.value),this.value=t,this.reloadDom(),console.log(this.value,this.previousValue),this}reloadDom(){this.reloadVastatePrints(),this.reloadVastateEachs()}reloadVastatePrints(){document.querySelectorAll(`vastate-print[state="${this.name}"], [vastate-print][state="${this.name}"]`).forEach((e=>{this.isLoading?e.innerHTML+=t.loadingTemplate:(e.innerHTML=e.innerHTML.split(t.loadingTemplate).join(""),e.hasAttribute("html")?e.innerHTML=e.innerHTML.split(this.previousValue.toString()).join(this.getVastatePrintValue(e)):e.textContent=e.textContent.split(this.previousValue.toString()).join(this.getVastatePrintValue(e)))}))}reloadVastateEachs(){document.querySelectorAll(`vastate-each[state="${this.name}"], [vastate-each][state="${this.name}"]`).forEach((e=>{for(;e.children.length>1;)e.removeChild(e.lastElementChild);const i=Array.isArray(this.get())?this.get():[];if(i.length<1)return this.isLoading?void(e.innerHTML+=t.loadingTemplate):(e.innerHTML=e.innerHTML.split(t.loadingTemplate).join(""),void e.querySelectorAll("* + *").forEach((t=>t.remove())));null==i||i.forEach((t=>{var i;const a=document.querySelector(`vastate-each[state="${this.name}"] > *, [vastate-each][state="${this.name}"] > *`),n=null==a?void 0:a.cloneNode(!0);null==a||a.setAttribute("hidden","true"),n.removeAttribute("hidden"),"vastate-print"==n.tagName.toLocaleLowerCase()||n.hasAttribute("vastate-print")?n.innerHTML=null===(i=n.innerHTML)||void 0===i?void 0:i.split(this.placeholder).join(this.getVastatePrintValue(n,t)):null==n||n.querySelectorAll("vastate-print, [vastate-print]").forEach((e=>{var i;e.removeAttribute("hidden"),e.innerHTML=null===(i=e.innerHTML)||void 0===i?void 0:i.split(this.placeholder).join(this.getVastatePrintValue(e,t))})),e.appendChild(n)}))}))}getVastatePrintValue(t,e=this.get()){var i;return"object"!=typeof e||t.hasAttribute("obj")?"object"==typeof e&&Object.keys(e).length>0?e[null!==(i=t.getAttribute("obj").toString())&&void 0!==i?i:Object.keys(this.get())[0]]:e:(document.body.style.background="hsla(0,0%,90%,1)",document.body.style.color="hsla(0,0%,10%,.9)",document.body.style.fontFamily="arial",document.body.innerHTML=`\n                \n                <h1>Vastate JS Error</h1>\n                <strong>You are trying to print an object without passing obj attribute in vastate print</strong>\n                <br>\n                <strong>Helpful Info:</strong>\n                <br>\n                <br>\n                <pre  style="  background: #262626; color:white;\n  font-weight: bold;\n  padding: 1rem;\n  border-radius: 6px;">\n                <code>${t.outerHTML.split("<").join("&lt;").split(">").join("&gt;")}</code>\n                </pre>            \n`,e)}}window.Vastate=t})();